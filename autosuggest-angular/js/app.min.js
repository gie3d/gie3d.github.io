(function(){var e=angular.module("autoSuggestApp",[]);e.factory("autoSuggestFactory",function(){var e={list:[{ric:"005930.KS",title:"Samsung Electronics Co Ltd"},{ric:"601857.SS",title:"PetroChina Co Ltd"},{ric:"7203.T",title:"Toyota Motor Corp"},{ric:"BHP.AX",title:"BHP Billiton Ltd"},{ric:"SIEGn.DE",title:"Siemens AG"},{ric:"TRI.TO",title:"Thomson Reuters Corp"}]},t={rics:[{ric:"IBM.N",subtitle:"Ordinary Share - New York Stock Exchange - IBM",title:"International Business Machines Corp",type:"EQ"},{ric:"A",subtitle:"Ordinary Share - NYSE Consolidated - A",title:"Agilent Technologies Inc",type:"EQ"},{ric:"GOOGL.O",subtitle:"Ordinary Share - NASDAQ Global Select Consolidated - GOOGL",title:"Google Inc",type:"EQ"},{ric:"AAPL.O",subtitle:"Ordinary Share - NASDAQ Global Select Consolidated - AAPL",title:"Apple Inc",type:"EQ"},{ric:"0#CL:",subtitle:"Crude Oil - Commodity Future - New York Mercantile Exchange (NYMEX)",title:"NYMEX Light Sweet Crude Oil (WTI) Composite Energy Future Chain Contracts",type:"COM"},{ric:"0#WTI:",subtitle:"Commodity Future - ROSARIO FUTURES EXCHANGE",title:"ROFEX WTI Light Sweet Crude Oil Energy Future Chain Contract",type:"COM"},{ric:"THB=",subtitle:"THOMSON REUTERS",title:"US Dollar/Thai Baht FX Spot Rate",type:"FX"},{ric:"AUD=",subtitle:"THOMSON REUTERS",title:"Australian Dollar/US Dollar FX Spot Rate",type:"FX"},{ric:".SPX",subtitle:"US - Equity Index - MXP",title:"S&P 500 Index",type:"INDX"},{ric:"0#USBMK=",subtitle:"US BMK YC - THOMSON REUTERS",title:"United States Government Benchmark Yield Curve",type:"BMK"}]},r=0,i=5,n=function(t){return e.list.unshift(t),e},a=function(t){return e.list.splice(t,1),e},o=function(){return e={list:[]}},c=function(){return e},s=function(){return t},l=function(t){var r=!1,i=0,n=e.list.length;for(i=0;n>i;i++)if(e.list[i].ric===t){r=!0;break}return{result:r,index:i}},u=function(e){return r=e},g=function(){return r},d=function(){return Math.ceil(e.list.length/i)};return{addRic:n,removeRic:a,removeAllRics:o,getDisplayedRics:c,isRicDup:l,setPage:u,currentPage:r,pageSize:i,totalPages:d,getCurrentPage:g,getDataSource:s}}),e.controller("autoSugesstCtrl",["$scope","autoSuggestFactory",function(e,t){e.searchRic=function(){e.duplicateRicAlert=!1;var r=t.getDataSource();e.suggests=[];for(var i=e.searchText.toLowerCase(),n=0,a=r.rics.length;a>n;n++)(-1!==r.rics[n].ric.toLowerCase().indexOf(i)||-1!==r.rics[n].subtitle.toLowerCase().indexOf(i)||-1!==r.rics[n].title.toLowerCase().indexOf(i)||-1!==r.rics[n].type.toLowerCase().indexOf(i))&&e.searchText.length>0&&e.suggests.push(r.rics[n]);e.suggests.length>0?(e.displaySearchBox=!0,e.searchTextBox="form-group"):0===e.suggests.length&&0===e.searchText.length?(e.displaySearchBox=!1,e.searchTextBox="form-group"):(e.displaySearchBox=!1,e.searchTextBox="form-group has-error")},e.addRic=function(r,i){e.displaySearchBox=!1;var n=t.isRicDup(r);n.result?(e.duplicateRicAlert=!0,e.duplicateRic=r):(t.addRic({ric:r,title:i}),t.setPage(0))}}]),e.controller("selectedRicsCtrl",["$scope","autoSuggestFactory",function(e,t){e.displayedRics=t.getDisplayedRics(),e.pageSize=t.pageSize,e.currentPage=function(){return t.getCurrentPage()},e.totalPages=function(){return t.totalPages()},e.setPage=function(e){t.setPage(e)},e.nextPage=function(){var r=e.currentPage(),i=e.totalPages()-1;i>r&&t.setPage(r+1)},e.prevPage=function(){var r=e.currentPage();r>0&&t.setPage(r-1)},e.removeRic=function(r){var i=e.currentPage(),n=t.isRicDup(r);n.result&&(e.displayedRics=t.removeRic(n.index),i>=e.totalPages()&&e.prevPage())},e.isPrevShown=function(){return 0==e.currentPage()?"disabled":"enabled"},e.isNextShown=function(){return e.currentPage()==e.totalPages()-1?"disabled":"enabled"},e.hasRicToShow=function(){return e.displayedRics.list.length>0},e.hasMoreThanOnePage=function(){return e.totalPages()>=1},e.removeAllRics=function(){e.displayedRics=t.removeAllRics()},e.range=function(e){for(var t=[],r=0;e>r;r++)t.push(r);return t}}]),e.filter("startFrom",function(){return function(e,t){return t=+t,e.slice(t)}}),e.filter("highlight",["$sce",function(e){return function(t,r){return r&&(t=t.replace(RegExp("("+r+")","gi"),'<span class="highlighted">$1</span>')),e.trustAsHtml(t)}}])})();