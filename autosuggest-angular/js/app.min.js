(function(){var e={list:[{ric:"005930.KS",title:"Samsung Electronics Co Ltd"},{ric:"601857.SS",title:"PetroChina Co Ltd"},{ric:"7203.T",title:"Toyota Motor Corp"},{ric:"BHP.AX",title:"BHP Billiton Ltd"},{ric:"SIEGn.DE",title:"Siemens AG"},{ric:"TRI.TO",title:"Thomson Reuters Corp"}]},t={rics:[{ric:"IBM.N",subtitle:"Ordinary Share - New York Stock Exchange - IBM",title:"International Business Machines Corp",type:"EQ"},{ric:"A",subtitle:"Ordinary Share - NYSE Consolidated - A",title:"Agilent Technologies Inc",type:"EQ"},{ric:"GOOGL.O",subtitle:"Ordinary Share - NASDAQ Global Select Consolidated - GOOGL",title:"Google Inc",type:"EQ"},{ric:"AAPL.O",subtitle:"Ordinary Share - NASDAQ Global Select Consolidated - AAPL",title:"Apple Inc",type:"EQ"},{ric:"0#CL:",subtitle:"Crude Oil - Commodity Future - New York Mercantile Exchange (NYMEX)",title:"NYMEX Light Sweet Crude Oil (WTI) Composite Energy Future Chain Contracts",type:"COM"},{ric:"0#WTI:",subtitle:"Commodity Future - ROSARIO FUTURES EXCHANGE",title:"ROFEX WTI Light Sweet Crude Oil Energy Future Chain Contract",type:"COM"},{ric:"THB=",subtitle:"THOMSON REUTERS",title:"US Dollar/Thai Baht FX Spot Rate",type:"FX"},{ric:"AUD=",subtitle:"THOMSON REUTERS",title:"Australian Dollar/US Dollar FX Spot Rate",type:"FX"},{ric:".SPX",subtitle:"US - Equity Index - MXP",title:"S&P 500 Index",type:"INDX"},{ric:"0#USBMK=",subtitle:"US BMK YC - THOMSON REUTERS",title:"United States Government Benchmark Yield Curve",type:"BMK"}]},r=angular.module("autoSuggestApp",[]);r.factory("autoSuggestFactory",function(){var t=e,r=0,i=5,n=function(e){return t.list.unshift(e),t},a=function(e){return t.list.splice(e,1),t},o=function(){return t={list:[]}},s=function(){return t},c=function(e){var r=!1,i=0,n=t.list.length;for(i=0;n>i;i++)if(t.list[i].ric===e){r=!0;break}return{result:r,index:i}},l=function(e){return r=e},u=function(){return r},g=function(){return Math.ceil(t.list.length/i)};return{addRic:n,removeRic:a,removeAllRics:o,getDisplayedRics:s,isRicDup:c,setPage:l,currentPage:r,pageSize:i,totalPages:g,getCurrentPage:u}}),r.controller("autoSugesstCtrl",["$scope","autoSuggestFactory",function(e,r){e.searchRic=function(){e.duplicateRicAlert=!1,e.suggests=[];for(var r=e.searchText.toLowerCase(),i=0,n=t.rics.length;n>i;i++)(-1!==t.rics[i].ric.toLowerCase().indexOf(r)||-1!==t.rics[i].subtitle.toLowerCase().indexOf(r)||-1!==t.rics[i].title.toLowerCase().indexOf(r)||-1!==t.rics[i].type.toLowerCase().indexOf(r))&&e.searchText.length>0&&e.suggests.push(t.rics[i]);e.suggests.length>0?(e.displaySearchBox=!0,e.searchTextBox="form-group"):0===e.suggests.length&&0===e.searchText.length?(e.displaySearchBox=!1,e.searchTextBox="form-group"):(e.displaySearchBox=!1,e.searchTextBox="form-group has-error")},e.addRic=function(t,i){e.displaySearchBox=!1;var n=r.isRicDup(t);n.result?(e.duplicateRicAlert=!0,e.duplicateRic=t):(r.addRic({ric:t,title:i}),r.setPage(0))}}]),r.controller("selectedRicsCtrl",["$scope","autoSuggestFactory",function(e,t){e.displayedRics=t.getDisplayedRics(),e.pageSize=t.pageSize,e.currentPage=function(){return t.getCurrentPage()},e.totalPages=function(){return t.totalPages()},e.setPage=function(){t.setPage(this.n)},e.nextPage=function(){var r=e.currentPage(),i=e.totalPages()-1;i>r&&t.setPage(r+1)},e.prevPage=function(){var r=e.currentPage();r>0&&t.setPage(r-1)},e.removeRic=function(r){var i=e.currentPage(),n=t.isRicDup(r);n.result&&(e.displayedRics=t.removeRic(n.index),i>=e.totalPages()&&e.prevPage())},e.isPrevShown=function(){return 0==e.currentPage()?"disabled":"enabled"},e.isNextShown=function(){return e.currentPage()==e.totalPages()-1?"disabled":"enabled"},e.hasRicToShow=function(){return e.displayedRics.list.length>0},e.hasMoreThanOnePage=function(){return e.totalPages()>=1},e.removeAllRics=function(){e.displayedRics=t.removeAllRics()},e.range=function(e){for(var t=[],r=0;e>r;r++)t.push(r);return t}}]),r.filter("startFrom",function(){return function(e,t){return t=+t,e.slice(t)}}),r.filter("highlight",["$sce",function(e){return function(t,r){return r&&(t=t.replace(RegExp("("+r+")","gi"),'<span class="highlighted">$1</span>')),e.trustAsHtml(t)}}])})();